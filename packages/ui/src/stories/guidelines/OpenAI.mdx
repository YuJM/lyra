import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Guidelines/OpenAI" />

# OpenAI Apps SDK 가이드라인

Lyra UI는 OpenAI Apps SDK 디자인 가이드라인을 준수하여 ChatGPT와 같은 AI 애플리케이션에 최적화되어 있습니다.

---

## 📖 5대 핵심 원칙

### 1. Conversational (대화형)

대화 중심의 자연스러운 인터랙션을 지원합니다.

#### ✅ 준수 사항

**Dialog 컴포넌트**:
- 대화 컨텍스트 유지 (이전 메시지 참조)
- 자연스러운 흐름 (모달 최소화)
- 비파괴적 닫기 (작성 중인 내용 보존)

**Toast 컴포넌트**:
- 대화 흐름에 통합 (ChatGPT 메시지 스타일)
- 컨텍스트 기반 알림

#### 향후 추가 예정
- **ChatSheet**: Fullscreen 대화 모드
- **ContextualPrompt**: 사용자 의도 기반 제안

---

### 2. Intelligent (지능형)

컨텍스트를 이해하고 지능적으로 반응합니다.

#### ✅ 준수 사항

**동적 상태 관리**:
- 컨텍스트 기반 활성화/비활성화
- 사용자 의도 파악 후 적절한 UI 제공

**스마트 기본값**:
- 이전 선택 기억
- 예상 가능한 다음 액션 제안

#### 향후 추가 예정
- **ContextualPrompt**: AI 기반 제안 컴포넌트
- **SmartSelect**: 컨텍스트 기반 옵션 필터링

---

### 3. Simple (단순함)

최소한의 UI로 명확한 계층을 유지합니다.

#### ✅ 준수 사항

**Card 컴포넌트**:
- 최대 2개 액션 제한
- 깊은 네비게이션 없음
- 명확한 정보 계층

**Button 컴포넌트**:
- 단순한 variant (primary, secondary, text)
- 명확한 레이블 (아이콘만 사용 시 aria-label 필수)

#### ❌ 금지 사항
- 3개 이상 액션 버튼 (Card 내)
- 복잡한 중첩 네비게이션
- 모호한 아이콘 전용 버튼

---

### 4. Responsive (반응형)

빠른 피드백과 스트리밍을 지원합니다.

#### ✅ 준수 사항

**Progress 컴포넌트**:
- 스트리밍 인디케이터
- 예상 완료 시간 표시
- 실시간 진행 상황

**Toast 컴포넌트**:
- 즉각적인 피드백 (200ms 이내)
- 적절한 지속 시간 (5초 기본)

#### 향후 추가 예정
- **Skeleton**: 로딩 상태 컴포넌트
- **StreamingText**: 텍스트 스트리밍 애니메이션

---

### 5. Accessible (접근성)

WCAG 2.1 Level AA를 100% 준수합니다.

#### ✅ 준수 사항

**모든 컴포넌트**:
- 색상 대비율 최소 4.5:1 (일반 텍스트), 3:1 (UI)
- 키보드 네비게이션 완전 지원
- 스크린 리더 최적화
- 명확한 포커스 인디케이터 (3:1 대비율)

**자동 검증**:
- Storybook A11y addon (실시간 검증)
- `pnpm test:a11y` (자동화 테스트)

📖 [접근성 가이드 상세 보기](/story/guidelines-accessibility--docs)

---

## 🎨 비주얼 디자인 표준

### Color System (색상 시스템)

#### ✅ 준수 사항

**시스템 정의 팔레트 사용**:
```css
/* 올바른 예 */
button {
  background: var(--color-primary);
  color: var(--color-on-primary);
}
```

**계층적 시맨틱 토큰**:
- Primary: 주요 액션
- Secondary: 보조 액션
- Surface: 배경/카드
- Error/Success/Warning: 상태 표시

#### ❌ 금지 사항

**커스텀 그라데이션/배경**:
```css
/* 잘못된 예 */
button {
  background: linear-gradient(45deg, #ff0000, #00ff00);
}
```

**하드코딩된 색상 값**:
```css
/* 잘못된 예 */
button {
  background: #3b82f6;
  color: #ffffff;
}
```

📖 [색상 시스템 보기](/story/design-tokens-colors--docs)

---

### Typography (타이포그래피)

#### ✅ 준수 사항

**플랫폼별 폰트 스택**:
```css
--font-family-base: -apple-system, BlinkMacSystemFont,
  "Segoe UI", Roboto, system-ui, sans-serif;
```

**일관된 사이징 계층**:
- Display: 48px (h1)
- Heading: 32px (h2), 24px (h3)
- Body: 16px (기본), 14px (보조)
- Caption: 12px

📖 [타이포그래피 보기](/story/design-tokens-typography--docs)

---

### Spacing & Layout (간격 및 레이아웃)

#### ✅ 준수 사항

**Border Radius 표준**:
- `sm`: 4px (Button, Input)
- `md`: 8px (Card)
- `lg`: 12px (Dialog)
- `xl`: 16px (Sheet)
- `full`: 9999px (Avatar)

**시스템 그리드 간격**:
- 4px 단위 (--spacing-1 ~ --spacing-12)
- 일관된 패딩/마진

📖 [Spacing 시스템 보기](/story/design-tokens-size--docs)

---

### Iconography (아이콘)

#### ✅ 준수 사항

**Icon 컴포넌트** (향후 추가):
- 단색 또는 아웃라인 스타일
- 16px, 20px, 24px 크기
- 접근 가능한 이름 필수 (`aria-label`)

**대체 텍스트**:
```tsx
// 올바른 예
<Button aria-label="검색">
  <SearchIcon />
</Button>
```

#### ❌ 금지 사항

**접근 가능한 이름 없음**:
```tsx
// 잘못된 예
<Button>
  <SearchIcon />
</Button>
```

---

## 🏗️ 디스플레이 모드별 가이드라인

### Inline Mode (인라인 모드)

ChatGPT 메시지 흐름 내에 표시되는 컴포넌트

#### 적용 컴포넌트
- **Card**: 최대 2개 액션, 동적 높이
- **Button**: Compact variant
- **Progress**: 인라인 인디케이터

#### 제약사항
- 최대 높이 제한 없음 (동적 높이)
- 가로 스크롤 금지
- 깊은 네비게이션 금지

---

### Fullscreen Mode (풀스크린 모드)

전체 화면을 차지하는 컴포넌트

#### 적용 컴포넌트 (향후 추가)
- **ChatSheet**: ChatGPT composer 오버레이
- **Canvas**: 복잡한 인터랙션 (편집, 맵)

#### 제약사항
- ESC 키로 닫기 필수
- 포커스 트랩 구현
- 배경 비활성화 (inert)

---

### Picture-in-Picture (PiP)

대화 중에도 지속 표시되는 컴포넌트

#### 적용 컴포넌트 (향후 추가)
- **FloatingWindow**: 미니 플레이어, 실시간 모니터링

#### 제약사항
- 드래그 가능
- 크기 조절 가능
- 최소화/복원 지원

---

## 📏 컴포넌트별 가이드라인

### Card 컴포넌트

#### ✅ Do (올바른 예)
```tsx
<Card>
  <Card.Media>
    <img src="image.jpg" alt="설명" />
  </Card.Media>
  <Card.Header>
    <Card.Title>제목</Card.Title>
    <Card.Metadata>2025-10-23</Card.Metadata>
  </Card.Header>
  <Card.Content>
    내용...
  </Card.Content>
  <Card.Actions>
    <Button>주요 액션</Button>
    <Button variant="secondary">보조 액션</Button>
  </Card.Actions>
</Card>
```

#### ❌ Don't (잘못된 예)
```tsx
<Card>
  <Card.Actions>
    <Button>액션 1</Button>
    <Button>액션 2</Button>
    <Button>액션 3</Button> {/* ❌ 3개 이상 금지 */}
  </Card.Actions>
</Card>
```

---

### Dialog 컴포넌트

#### ✅ Do
```tsx
<Dialog.Root>
  <Dialog.Trigger asChild>
    <Button>열기</Button>
  </Dialog.Trigger>
  <Dialog.Portal>
    <Dialog.Backdrop />
    <Dialog.Popup>
      <Dialog.Title>제목</Dialog.Title>
      <Dialog.Description>설명</Dialog.Description>
      <Dialog.Close asChild>
        <Button>닫기</Button>
      </Dialog.Close>
    </Dialog.Popup>
  </Dialog.Portal>
</Dialog.Root>
```

#### ❌ Don't
```tsx
<Dialog.Root>
  <Dialog.Popup>
    {/* ❌ 제목 없음 (접근성 위반) */}
    <p>내용</p>
    {/* ❌ 닫기 버튼 없음 (키보드 트랩) */}
  </Dialog.Popup>
</Dialog.Root>
```

---

### Button 컴포넌트

#### ✅ Do
```tsx
// 텍스트 버튼
<Button>클릭</Button>

// 아이콘 버튼 (aria-label 필수)
<Button aria-label="메뉴 열기">
  <MenuIcon />
</Button>

// 아이콘 + 텍스트
<Button>
  <PlusIcon />
  추가
</Button>
```

#### ❌ Don't
```tsx
// ❌ 아이콘만 있고 접근 가능한 이름 없음
<Button>
  <MenuIcon />
</Button>

// ❌ 모호한 레이블
<Button>클릭</Button>
```

---

## 🚫 일반적인 실수

### 1. 커스텀 색상 사용

#### ❌ 문제
```css
.custom-button {
  background: #3b82f6;
  color: #ffffff;
}
```

#### ✅ 해결
```css
.custom-button {
  background: var(--color-primary);
  color: var(--color-on-primary);
}
```

---

### 2. 3개 이상 액션 (Card)

#### ❌ 문제
```tsx
<Card.Actions>
  <Button>액션 1</Button>
  <Button>액션 2</Button>
  <Button>액션 3</Button>
</Card.Actions>
```

#### ✅ 해결
```tsx
<Card.Actions>
  <Button>주요 액션</Button>
  <Button variant="secondary">보조 액션</Button>
</Card.Actions>
```

---

### 3. 깊은 네비게이션 (Card 내)

#### ❌ 문제
```tsx
<Card>
  <Dialog.Trigger>
    <Button>상세 보기</Button>
  </Dialog.Trigger>
  {/* ❌ Card 내에서 Dialog 열기 금지 */}
</Card>
```

#### ✅ 해결
```tsx
<Card>
  <Button onClick={handleNavigate}>
    상세 보기
  </Button>
</Card>
```

---

## 📊 준수도 자가 진단

### 체크리스트

#### Color System
- [ ] 시스템 정의 팔레트만 사용
- [ ] 커스텀 그라데이션/배경 없음
- [ ] 하드코딩된 색상 값 없음

#### Typography
- [ ] 플랫폼별 폰트 스택 사용
- [ ] 일관된 사이징 계층 유지

#### Components
- [ ] Card 최대 2개 액션
- [ ] Dialog 제목 필수
- [ ] Button 접근 가능한 이름 필수
- [ ] 깊은 네비게이션 없음

#### Accessibility
- [ ] WCAG 2.1 AA 100% 준수
- [ ] Storybook A11y 탭 0개 위반
- [ ] 키보드 네비게이션 완전 지원

---

## 📚 참고 자료

### 공식 문서
- [OpenAI Apps SDK 디자인 가이드라인](https://platform.openai.com/docs/guides/apps-sdk/design-guidelines) (예시 링크)
- [ChatGPT 디자인 패턴](https://openai.com/chatgpt) (예시 링크)

### 내부 문서
- [접근성 가이드](/story/guidelines-accessibility--docs)
- [디자인 토큰](/story/design-tokens-designtokens--docs)
- [색상 시스템](/story/design-tokens-colors--docs)

### 프로젝트 문서
- [OpenAI 정렬 설계](https://github.com/lyra/lyra/blob/main/claudedocs/lyra-ui-openai-alignment-design.md)
- [구현 로드맵](https://github.com/lyra/lyra/blob/main/claudedocs/openai-alignment-implementation-roadmap.md)

---

**최종 업데이트**: 2025-10-23
**준수도 목표**: 95/100점
**현재 준수도**: 70/100점
